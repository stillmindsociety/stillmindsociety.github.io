<header class="header" role="banner">
  <div class="container">
    <div class="header__inner">
      <a href="index.html" class="logo">
        <img class="logo__symbol" src="assets/images/logo/favicon-32x32.png" alt="Still Mind Society Logo" width="40" height="40">
        <span class="logo__wordmark">Still Mind Society</span>
      </a>

      <nav class="nav" role="navigation" aria-label="Main navigation">
        <button class="nav-toggle" aria-expanded="false" aria-controls="nav-links" aria-label="Toggle navigation menu">
          â˜°
        </button>
        <ul class="nav-links" id="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="team.html">Team</a></li>
          <li><a href="initiatives.html">Initiatives</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li id="admin-nav" style="display: none;">
            <a href="login.html" id="admin-link" class="nav-admin-link">Admin</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

<!-- CMS Toolbar (visible only to authenticated admins) -->
<div id="cms-toolbar" class="cms-toolbar" style="display: none;">
  <div class="cms-toolbar__content">
    <div class="cms-toolbar__actions">
      <button onclick="window.cms?.savePage()" class="btn btn--primary btn--sm">
        ğŸ’¾ Save Changes
      </button>
      <button onclick="window.cms?.resetPage()" class="btn btn--subtle btn--sm">
        ğŸ”„ Reset
      </button>
      <button onclick="window.cms?.showGitHubSettings()" class="btn btn--subtle btn--sm">
        âš™ï¸ GitHub
      </button>
    </div>
  </div>
</div>

<!-- CMS Toggle Button (visible only to authenticated admins) -->
<button class="cms-toggle" onclick="window.cms?.toggleCMSMode()" title="Toggle Edit Mode" style="display: none;">
  âœï¸
</button>

<!-- CMS Save Button (visible only when in edit mode) -->
<button class="cms-save-btn" onclick="window.cms?.savePage()" title="Save Changes" style="display: none;">
  ğŸ’¾
</button>

<script>
// Show/hide admin navigation based on auth state
function updateAdminNav() {
  const adminNav = document.getElementById('admin-nav');
  const adminLink = document.getElementById('admin-link');
  const isAuthenticated = localStorage.getItem('sms-admin-auth') === 'true';
  const adminEmail = localStorage.getItem('sms-admin-email');

  if (isAuthenticated && adminEmail) {
    adminNav.style.display = 'block';
    adminLink.textContent = 'Admin';
    adminLink.title = `Signed in as ${adminEmail}`;
    adminLink.classList.add('nav-admin-link--authenticated');
  } else {
    adminNav.style.display = 'none';
    adminLink.classList.remove('nav-admin-link--authenticated');
  }
}

// Update admin nav on page load and storage changes
document.addEventListener('DOMContentLoaded', updateAdminNav);
window.addEventListener('storage', updateAdminNav);

// Check periodically for auth state changes
setInterval(updateAdminNav, 1000);
</script>
